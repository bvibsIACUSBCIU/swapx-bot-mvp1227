# 日志系统优化说明

## 优化内容

### 1. 日志分类
- **交易日志 (Trade Log)**: 所有与交易相关的操作
  - 交易发起、执行、确认
  - 买入/卖出操作
  - 策略触发信号
  - 授权操作
  
- **系统日志 (System Log)**: 项目运行相关
  - 系统启动/停止
  - 错误信息
  - 余额变化
  - 一般性信息

### 2. 余额动态监控
- 使用 `BalanceMonitor` 类自动检测余额变化
- 只在余额有实际变化时输出日志
- 避免重复的"余额获取成功"日志

### 3. 减少不必要日志
- 移除频繁的价格查询日志
- 移除冗余的中间步骤日志
- 合并相关的日志信息
- 移除授权充足时的日志输出

## 使用方法

### 系统日志
```javascript
import { log } from '../utils/logger'

// 一般信息（可选静默模式）
log.info('消息', data, silent)

// 成功信息
log.success('操作成功', data)

// 警告信息
log.warning('警告', data)

// 错误信息
log.error('错误', error)

// 调试信息
log.debug('调试', data)
```

### 交易日志
```javascript
import { tradeLog } from '../utils/logger'

// 交易相关的所有操作都使用 tradeLog
tradeLog.info('开始执行交易')
tradeLog.success('交易成功')
tradeLog.warning('触发买入信号')
tradeLog.error('交易失败', error)
```

### 余额监控
```javascript
import { BalanceMonitor } from '../utils/logger'

const balanceMonitor = new BalanceMonitor()

// 检查并记录余额变化（只在有变化时输出）
balanceMonitor.checkAndLog(address, {
  xoc: '100.0000',
  wxoc: '200.0000',
  usdt: '300.00'
})
```

## 日志管理

### 查看日志
```javascript
import { getLogs } from '../utils/logger'

// 获取所有日志
const allLogs = getLogs('all')

// 只获取交易日志
const tradeLogs = getLogs('trade')

// 只获取系统日志
const systemLogs = getLogs('system')
```

### 清空日志
```javascript
import { clearLogs } from '../utils/logger'

// 清空所有日志
clearLogs('all')

// 清空交易日志
clearLogs('trade')

// 清空系统日志
clearLogs('system')
```

## 界面功能

日志显示组件新增：
- **全部/交易/系统** 三个标签页切换
- 交易日志带有橙色"交易"标签
- 系统日志带有青色"系统"标签
- 支持按类型清空和导出日志

## 优化效果

✅ 日志更加清晰，易于查找交易记录
✅ 减少90%以上的冗余日志输出
✅ 余额只在变化时输出，避免噪音
✅ 交易流程一目了然
✅ 系统运行状态清晰可见
